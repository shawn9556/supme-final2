{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    
    <script>
        $(function() {
          $('input[name="daterange"]').daterangepicker({
            opens: 'right',
            startDate: moment(),
            maxSpan: {
                "days": 2
            },
            "locale": {
            "daysOfWeek": ["월", "화", "수", "목", "금", "토", "일"],
            "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
            }
          }, function(start, end, label) {
            console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
          });
        });
    </script>

    <title>Dashboard</title>
</head>
<body>
    <div class="container my-3">
        <!-- Profile 정보 -->
            <h2 class="border-bottom py-2">{{ user.username }}</h2>
            <div class="card my-3">
                <div class="card-body">
                    <div class="card-text" style="white-space: preline;">
                        <ol>
                            <li>Type: {{ profile.alien_type }}</li>
                            <li>
                                <img src="{{ profile.alien_type.url }}" class="img-fluid">
                            </li>
                            <li>Story: {{ profile.alien_content }}</li>
                            <li>Email: {{ profile.email }}</li>
                        </ol>
                    </div>

                        <!-- ### 해당 user의 travelbox 가져오기 ### -->
                        <!-- <a href="{{ box_view }}"> travel box</a> -->
                        <a href="{% url 'travelbox:travelbox' box_view.id %}"> travel box</a>
                
                </div>
            </div>
            <!-- 요청한 여행 갯수 -->
            <h5 class="border-bottom my-3 py-2">{{ profile.select_set.count }}개의 여행을 요청하였습니다</h5>
        
            {% for select in profile.select_set.all %}
            <div class="card my-3">
                <div class="card-body">
                    <div class="card-text" style="white-space: pre-line;" >{{ select.state_name }}</div>
                    
                    <div class="d-flex justify-content-end">
                        <div class="badge bg-light text-dark p-2">{{ select.create_date }}</div>
                    </div>
                </div>
            </div>
            {% endfor %}
            <!-- 여행 선택 -->
            <h5 class="border-bottom my-3 py-2">여행을 요청하세요</h5>
            <form action="{% url 'mypage:select_travel' %}" method="post" class="my-3">
                {% csrf_token %}
                <div {% if preparing %}class="active"{% endif %} >Temp</div>
                <div class="card-body mb-3">
                    <div class="card-text" style="vertical-align: auto;">
                        <label for='people' class="type-label">인원수</label>
                        <input {% if not user.is_authenticated %}disabled{% endif %} type="number"  min="1" max="2" default="1" name="people" id="people" rows="1">

                        <label for='start_date' class="type-label">여행 일정</label>
                        <input {% if not user.is_authenticated %}disabled{% endif %} type="text" name="daterange" id="start_date">
        
                        <label for='travel_purpose' class="type-label">여행 목적</label>
                        <input {% if not user.is_authenticated %}disabled{% endif %} type="search" name="travel_purpose" id="travel_purpose" list="purpose-list">
                        <datalist id="purpose-list">
                            <option value="힐링"></option>
                            <option value="아웃도어"></option>
                            <option value="맛집투어"></option>
                            <option value="자연감상"></option>
                        </datalist>
        
                        <label for='place_start' class="type-label">출발지</label>
                        <input {% if not user.is_authenticated %} disabled {% endif %} type="search" name="place_start" id="place_start" list="start-list">
                        <datalist id="start-list">
                            <option value="강동구">강동구</option>
                            <option value="강남구">강남구</option>
                            <option value="강북구">강북구</option>
                            <option value="강서구">강서구</option>
                        </datalist>
                        
                        <input type="submit" value="선택" {% if not can_select %}disabled{% endif %} class="btn btn-primary">
                    
                    </div>
                </div>
            </form>
        </div>
    {% if user.is_authenticated %}
    <form action="/mypage/logout/" method="post">
        {% csrf_token %}
        <input type="submit" value="로그아웃" />
    </form>
    {% else %}
    <form action="/mypage/login/" method="get">
        <input type="submit" value="로그인" />
    </form>
    <form action="/mypage/signup/" method="get">
        <input type="submit" value="회원가입" />
    </form>
    {% endif %}

    <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
        <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="/static/landing/assets/img/photo0.jpg" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
            <h5>First slide label</h5>
            <p>Some representative placeholder content for the first slide.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="/static/landing/assets/img/photo2.jpg" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
            <h5>Second slide label</h5>
            <p>Some representative placeholder content for the second slide.</p>
            </div>
        </div>
        <div class="carousel-item">
            <img src="/static/landing/assets/img/photo3.jpg" class="d-block w-100" alt="...">
            <div class="carousel-caption d-none d-md-block">
            <h5>이끼 계곡</h5>
            <p>Some representative placeholder content for the third slide.</p>
            </div>
        </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Next</span>
        </button>
    </div>
</body>
</html>

{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Profile</title>
        <!-- Favicon -->
        <link href="{% static 'home/img/favicon.png' %}" rel="icon">
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Saira+Extra+Condensed:500,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Muli:400,400i,800,800i" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="/static/landing/css/styles.css" rel="stylesheet" />
        <link rel="stylesheet" href="//code.jquery.com/ui/1.13.1/themes/base/jquery-ui.css">
        <link rel="stylesheet" href="/resources/demos/style.css">
        <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
        <script src="https://code.jquery.com/ui/1.13.1/jquery-ui.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
        <script src="https://kit.fontawesome.com/a7bf9f3dfd.js" crossorigin="anonymous"></script>
        <!--외계인사진-->
        <link rel="stylesheet" href="{% static 'survey/css/style.css' %}">
        <!-- 여행 일정 pick하기 -->
       <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
       <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
       <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
       <script>
           $(function() {
           $('input[name="daterange"]').daterangepicker({
               opens: 'right',
               startDate: moment(),
               maxSpan: {
                   "days": 2
               },
               "locale": {
               "daysOfWeek": ["월", "화", "수", "목", "금", "토", "일"],
               "monthNames": ["1월", "2월", "3월", "4월", "5월", "6월", "7월", "8월", "9월", "10월", "11월", "12월"],
               }
           }, function(start, end, label) {
               console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
           });
           });
       </script>
       <!-- profile card 관련 css -->
       <link rel="stylesheet" href= "{% static 'survey/css/style.css' %}">
       <!-- 사진 크레딧 -->
       <style>
           #navpic-credit {
             display: flex;
             align-self: flex-end;
             font-size: x-small;
           }
         </style>

       <!-- 사진첩 -->
       <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>
    <body id="page-top" background="/static/landing/assets/img/space.jpg" >
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-dark  fixed-top" style="background-color:#E2455A;" id="sideNav">
            <a class="navbar-brand js-scroll-trigger" href="#page-top">
                <span class="d-block d-lg-none">SUPME</span>
                <span class="d-none d-lg-block" style="padding-right:10px;"><h1>SUPME</h1></span>
                <!-- <span class="d-none d-lg-block"><img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="assets/img/profile.jpg" alt="..." /></span> -->
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav">
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#profile">Profile</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#gotravel">Go Travel</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#myalbum">My Album</a></li>
                    <li class="nav-item"><a class="nav-link js-scroll-trigger" href="/mypage/login/">Logout</a></li>
                </ul>
            </div>
        </nav>
        <!-- Page Content-->
        <div class="container-fluid p-0" >
            <!-- Profile-->
            <div class="resume-section" id="profile">
                <div class="resume-section-content">

                    <h2 class="mb-5" style="margin-top:50px; padding-bottom: 80px; margin-left: 20px; font-size:50px">My Profile </h2>

                    <!--profile card-->
                    <div class="card text-center" style="margin-top:50px; margin-left:10px; margin-right: 10px; opacity: 0.85;">
                        <div class="card-header">
                            <!-- 외계인 profile 사진 -->
                            
                            <div class="profile-card__img">
                                {% if profile.alien_type %}
                                <img src="{{ profile.alien_type.url }}" width="100p" style="border-radius: 50px;" ></img>
                                {% endif %}
                            </div>
                            
                        


                            
                            <h3 style="margin-top:20px;">
                                화성에서온 
                                <span style="color:#E2455A; font-weight: 600;">{{ user.username}}</span>
                                님!
                            </h3><br>
                            <p style="font-size:16px" >SUPME 의 <span style="color:#E2455A; font-weight: 600;">{{profile.id}}</span>번째 탑승객입니다. </p>
                        </div>
                        <div class="card-body">
                            <div class="profil-contents">
                                <div class="profile-content-wrapper" style="font-size:15px;">
                                    <p class="profile-content"><strong>Name : </strong>&nbsp;{{profile.name}}</p>
                                    <p class="profile-content"><strong>Character : </strong>&nbsp;{{ profile.alien_name }}</p>
                                    <p class="profile-content"><strong>Phone : </strong> &nbsp;{{profile.phone_number}} </p>
                                    <p class="profile-content"><strong>Email : </strong> &nbsp;{{profile.email}} </p>
                                </div>
                                    
                                <!-- update button -->
                                <div class="profile-card-ctr d-grid gap-2 d-md-flex justify-content-md-end">
                                    <form action="{% url 'mypage:update' %}" method="get">
                                        <button class="profile-card__button button--orange" type="submit" id="updatebutton" name="update" value="update">
                                            <p style="color:white; text-decoration:none; margin: 0px;">정보 변경</p>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>


                        <div class="accordion-item">
                            <h2 class="accordion-header" id="headingTwo">
                                <section class="mother">
                                    <div>
                                        <button style="border-radius: 15px; border:0;" class="profile-card__button button--orange collapsed btn btn-primary me-md-2" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                            <a style="font-family: sans-serif; font-size:16px; color:whitesmoke;">{{ profile.alien_name}} story</a>
                                        </button>  
                                    </div> 
                                </section>
                            </h2>
                            <!-- story section -->
                            <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
                                <div class="accordion-body">
                                    <div class="card-group">
                                        <div class="card">
                                            <div class="card card-body" >
                                                <br>
                                                {{ profile.alien_content }}
                                            </div>
                                        </div>
                                    
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
            <hr class="m-0" />
            
            <!-- GO Travel-->
            <section class="resume-section" id="gotravel">
                <div class="resume-section-content">
                    <h2 class="mb-5" style="margin-top:100px; margin-left: 20px; font-size:50px">Go Travel </h2>


                    <div class="card text-center" style="margin-top:60px; opacity: 0.85;"   >
                        <div class="card-header">
                            <p style="font-size: 22px; margin-top:40px; padding-bottom:20px; font-weight: 800;">
                                당신만의 로컬 여행 왕복선을 준비하고 있어요
                            </p>
                        </div>


                        <style>
                            #msform {
                                text-align: center;
                                position: relative;
                                margin-top: 20px;
                                }


                            #progressbar {
                            margin-bottom: 30px;
                            overflow: hidden;
                            color: lightgrey;
                            }
                            #progressbar .active {
                                color: #E2455A;
                                }

                            #progressbar li {
                            list-style-type: none;
                            font-size: 15px;
                            width: 25%;
                            float: left;
                            position: relative;
                            font-weight: 400;
                            }
                            /*Icons in the ProgressBar*/
                            #progressbar #preparing:before {
                            font-family: FontAwesome;
                            content: "\f281";
                            }

                            #progressbar #prepared:before {
                            font-family: FontAwesome;
                            content: "\f281";
                            }

                            #progressbar #on_travel:before {
                            font-family: FontAwesome;
                            content: "\f281";
                            }

                            #progressbar #finished:before {
                            font-family: FontAwesome;
                            content: "\f4fb";
                            }
                            /*Icon ProgressBar before any progress*/
                            #progressbar li:before {
                            width: 50px;
                            height: 50px;
                            line-height: 45px;
                            display: block;
                            font-size: 20px;
                            color: #ffffff;
                            background: rgb(145, 138, 138);
                            border-radius: 50%;
                            margin: 0 auto 10px auto;
                            padding: 2px;
                            }

                            /*ProgressBar connectors*/
                            #progressbar li:after {
                            content: '';
                            width: 100%;
                            height: 2px;
                            background: lightgray;
                            position: absolute;
                            left: 0;
                            top: 25px;
                            z-index: -1;
                            }

                            /*Color number of the step and the connector before it*/
                            #progressbar li.active:before, #progressbar li.active:after {
                            background: #E2455A;
                            }



                        </style>
                      

                        <div id="msform" >
                            <!-- progressbar -->
                            <ul id="progressbar" >
                                <li name="preparing" {% if preparing %}class="active"{% endif %} id="preparing"><strong>여행 준비중</strong></li>
                                <a {% if prepared %}href="{% url 'travelbox:travelbox' box_viewer.id %}" {% endif %}><li name="prepared" {% if prepared %} class="active" {% endif %} id="prepared"><strong>준비 완료</strong></li></a>
                                <a {% if on_travel %}href="{% url 'travelbox:travelbox' box_viewer.id %}" {% endif %}><li name="on_travel" {% if on_travel %}class="active"{% endif %} id="on_travel"><strong>여행 중</strong></li></a>
                                <li name="finished" {% if finished %}class="active"{% endif %} id="finished"><strong>여행 완료</strong></li>
                            </ul>
                        </div>

                        <div>
                            <p style="font-size:16px; color:grey; padding-top:10px; padding-bottom:30px; margin-top:20px; " >
                                {% if preparing %}놀라게 할 여행이 14일 뒤 오픈되요.<br> 설레일 시간이 얼마남지 않았네요!{% endif %}
                                {% if prepared %}여행 준비가 끝났어요. <br> '준비 완료' 버튼을 누르고 여정을 확인하세요.{% endif %}
                                {% if on_travel %}더 재미있는 여행 <br> '여행중' 버튼을 누르고 미션을 수행하세요! {% endif %}
                                {% if finished %}새로운 여행을 떠나보세요!{% endif %}
                            </p>
                        </div>

                    </div>


                    <div class="card text-center" style="margin-top:60px; opacity: 0.85;"   >


                        <div class="d-flex flex-column flex-md-row justify-content-between mb-5" style="margin-top:80px;">
                            <div class="flex-grow-1">
                                <h3 class="mb-0" style="color:#E2455A; font-weight:900; ">서프미 부탁해</h3>
                                <div class="subheading mb-3" style="color:black; font-size: 20px; padding-top: 20px;">서프라이즈한 여행을 가볼래!</div>
                                <p style="color:black;">선택 버튼을 누르고 서프미에게 알림을 보내주세요 </p>

                                <!-- 여행 일정 정하기  -->
                                <form action="{% url 'mypage:select_travel' %}" method="post" class="my-3">
                                    {% csrf_token %}
                                    <div>

                                        <!-- input 빈칸 박스 css -->
                                    <style>
                                        .input_number {
                                            width: 30%;
                                            border-radius: 5px;
                                            border-width: 1px;
                                            opacity: 0.8;
                                            padding-left: 10px;
                                            }
                                        .prpo{
                                            width: 30%;
                                            border-radius: 5px;
                                            border-width: 1px;
                                            opacity: 0.8;
                                        }    
                                   
                                    </style>

                                        <label for='people' class="type-label" style="color:black; margin-left: 16px; margin-top: 40px;">인원수</label>
                                        <input {% if not user.is_authenticated %}disabled{% endif %} class="input_number" pattern="\d*" placeholder="최대 4인 입니다" oninput="maxLengthCheck(this)" style=" padding-left: 10px; padding-right: 20px;" type="number"  min="1" max="4" default="1" name="people" id="people" rows="1">
                                        <script>
                                            function maxLengthCheck(Object) {
                                                if (object.value.length > object.maxLength) {
                                                    object.value = object.value.slice(0, object.maxLength)
                                                }
                                            }
                                        </script>
                                        
                                        
                                    </div>
                                    <div>
                                        <label for='start_date' class="type-label" style="color:black; margin-top: 20px;">여행 일정</label>
                                        <input {% if not user.is_authenticated %}disabled{% endif %} class="input_number" type="text" name="daterange" id="start_date" >
                                    </div>
                                    
                                        <!-- 여행 목적 선택 -->
                                        <label for='travel_purpose' class="type-label" style="color:black; margin-top: 20px;">여행 목적</label>
                                        <input {% if not user.is_authenticated %}disabled{% endif %} type="search" name="travel_purpose" id="travel_purpose" list="purpose-list" class="prpo">
                                        <datalist id="purpose-list">
                                            <option value="힐링"></option>
                                            <option value="아웃도어"></option>
                                            <option value="맛집투어"></option>
                                            <option value="자연감상"></option>
                                        </datalist>
                                        <br>
                                        <!-- 출발지 선택 -->
                                        <label for='place_start' class="type-label" style="color:black;margin-top: 20px; margin-left: 16px;">출발지</label>
                                        <input {% if not user.is_authenticated %} disabled {% endif %} type="search" name="place_start" id="place_start" list="start-list" class="prpo">
                                        <datalist id="start-list">
                                            <option value="강동구">강동구</option>
                                            <option value="강남구">강남구</option>
                                            <option value="강북구">강북구</option>
                                            <option value="강서구">강서구</option>
                                            <option value="관악구">관악구</option>
                                            <option value="송파구">송파구</option>
                                            <option value="양천구">양천구</option>
                                            <option value="용산구">용산구</option>
                                            <option value="금천구">금천구</option>
                                            <option value="노원구">노원구</option>
                                        </datalist>
                                        <!-- go button, progress button-->
                                        <div class="button-primary">
                                            <input type="submit" value="선택" {% if not can_select %}disabled{% endif %} class="btn btn-primary" style="margin-top:20px; margin-right:20px; border:0; background-color: orange; ">
                                        </div>
                                    
                                </form>
                                
                            </div>
                        </div>
                    </div>    
                </div>
            </section>
            <hr class="m-0" />

            <!-- Album-->
            <section class="resume-section" id="myalbum">
                <div class="resume-section-content">
                    <h2 class="mb-5"  style="margin-top:100px; margin-left: 20px; font-size:50px">My Album </h2>
                    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="true">
                        <div class="carousel-indicators">
                          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1" aria-label="Slide 2"></button>
                          <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2" aria-label="Slide 3"></button>
                        </div>
                        <div class="carousel-inner">
                          <div class="carousel-item active" >
                            {% if album.user_image_1 %}
                            <img src="/media/{{ album.user_image_1 }}" class="d-block" style="width: 80%; padding-left: 25%;" alt="...">
                            {% endif %}
                          </div>
                          <div class="carousel-item">
                            {% if album.user_image_2 %}
                            <img src="/media/{{ album.user_image_2 }}" class="d-block" style="width: 80%; padding-left: 25%;" alt="...">
                            {% endif %}
                          </div>
                          <div class="carousel-item">
                            {% if album.user_image_3 %}
                            <img src="/media/{{ album.user_image_3 }}" class="d-block" style="width: 80%; padding-left: 25%;" alt="...">
                            {% endif %}
                          </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                          <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                          <span class="carousel-control-next-icon" aria-hidden="true"></span>
                          <span class="visually-hidden">Next</span>
                        </button>
                      </div>
                </div>
            </section>
        
        </div>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
